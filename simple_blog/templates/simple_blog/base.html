{% extends "base.html" %}
{% load static simpleblog_tags wagtailcore_tags %}

{% block extra_css %}
  {{ block.super }}
  
  {% block bootstrap_theme %}
    <link rel="stylesheet" type="text/css" href="{% static 'simple_blog/css/bootstrap.min.css' %}">    
  {% endblock %}

  <link rel="stylesheet" type="text/css" href="{% static 'simple_blog/css/github.min.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'simple_blog/css/lightgallery.min.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'simple_blog/css/lightgallery-transitions.min.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'simple_blog/css/blog.css' %}">
{% endblock extra_css %}

{% block extra_js %}
  {{ block.super }}
  
  {% block bootstrap_theme_js %}
    <script type="text/javascript" src="{% static 'simple_blog/js/bootstrap.min.js' %}"></script>
  {% endblock %}

  <script type="text/javascript" src="{% static 'simple_blog/js/plugins/mermaid.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'simple_blog/js/plugins/highlight.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'simple_blog/js/plugins/gist.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'simple_blog/js/plugins/lightgallery.min.js' %}"></script>
  <script>
    hljs.highlightAll();
    window.GistEmbed.init();
    mermaid.initialize({ startOnLoad: true });
    var galleries = document.querySelectorAll('.lightgallery');
    galleries.forEach(function(el){
      lightGallery(el); 
    })
  </script>
{% endblock extra_js %}

{% block content %}
  <div class="blog-wrapper container">
    <section class="main-breadcrumb px-md-3">
      {% block breadcrumb %}
      <nav aria-label="breadcrumb">
        <ul class="breadcrumb">
          {% block breadcrumb_items %}
          {% for parent in page.get_ancestors %}
            {% if parent.url != request.site.root_page.url %}
              <li class="breadcrumb-item"><a href="{{ parent.get_url }}">{{ parent.title }}</a></li>
            {% endif %}
          {% endfor %}
          {% comment %} <li class="breadcrumb-item active" aria-current="page">{{ page.title|truncatechars:60 }}</li> {% endcomment %}
          {% endblock breadcrumb_items %}
        </ul>
      </nav>
      {% endblock breadcrumb %}
    </section>
    <div class="row">
      <div class="main-wrapper col-md-9 px-4">
        <section class="main-header">
          {% block main_header %}{% endblock main_header %}
        </section>
        <section class="main-content">{% block main_content %}{% endblock main_content %}</section>
      </div>
      <div class="sidebar-wrapper col-md-3 px-4 px-md-0">
        {% block sidebar %}
          <div class="sidebar">
            {% block sidebar_body %}
              {% categories_list 10 %}  
              {% tags_list 10 %}
            {% endblock sidebar_body %}
            {% include 'components/social_share.html' with title="Share this .." object_or_url=page.get_url object_title=page.title %}
          </div>
        {% endblock sidebar %}
      </div>
    </div>
  </div>
{% endblock content %}
